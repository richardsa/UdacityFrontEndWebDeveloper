var Client;(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{formSubmit:()=>d,getCity:()=>y,getImage:()=>f,getWeather:()=>u}),document.getElementById("submit");const n=document.getElementById("heading"),o=document.getElementById("temp"),a=(document.getElementById("content"),document.getElementById("search-form")),c=document.getElementById("location-img"),r=document.getElementById("weather");let l=new Date;l=l.setDate(l.getDate()+7);let i="",s=new Date;function d(t){t.preventDefault();const e=document.getElementById("city").value;let n=document.getElementById("trip-date").value,o=new Date(n);i=o>=l?"Predicted":"Current",Client.getCity(e).then((function(t){console.log("data12"+JSON.stringify(t));const e=t.geonames[0],o=e.name,a=e.adminCode1,c=e.countryCode,r=e.lat,l=e.lng;Client.getWeather(r,l,i,n).then((function(e){const n=e.temp,r=e.weather.description,l=e.weather.icon;console.log(`res2: ${t}`),Client.getImage(o).then((function(t){let e="https://placedog.net/500";t.webformatURL&&(e=t.webformatURL),g("/add",{city:o,state:a,country:c,image:e,temp:n,description:r,icon:l,timeFrame:i}).then((function(){m("all")}))}))}))}))}s.getMonth(),s.getDate(),s.getFullYear();const g=async(t,e)=>{const n=await fetch(t,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});try{return await n.json()}catch(t){console.log("Something went wrong!",t)}},m=async t=>{const e=await fetch(t);try{const t=await e.json(),a=t.data.city,l=t.data.state,i=t.data.country,s=t.data.image,d=t.data.description,g=t.data.temp,m=(t.data.icon,t.data.timeFrame);n.innerHTML=`${m} weather for ${a}, ${l}, ${i}`,o.innerHTML=`Temperature: ${g} &#8457;`,c.innerHTML=`<img src="${s}" class="results-img" />`,r.innerHTML=d}catch(t){console.log("error",t)}};a.addEventListener("submit",d);const y=async t=>{let e=`http://localhost:3000/cities/${t}`;const n=await fetch(e);try{const t=await n.json();return console.log(t),t}catch(t){console.log("error",t)}},u=async(t,e,n,o)=>{let a;if("Predicted"==n){let n=new Date(o),c=new Date(o);console.log("end date"+c),c=c.setUTCDate(c.getUTCDate()+1),console.log("end date"+c),console.log("start date "+n),n=h(n),c=h(c),a=`http://localhost:3000/avg-weather/?lat=${t}&lon=${e}&start_day=${n}&end_day=${c}`}else a=`http://localhost:3000/weather/?lat=${t}&lon=${e}`;const c=await fetch(a);try{const t=await c.json();return console.log(t.data[0]),t.data[0]}catch(t){console.log("error",t)}};function h(t){return console.log("date formatted"+t),(t=(t=new Date(t)).toISOString().split("T")[0]).slice(5)}const f=async t=>{let e=`http://localhost:3000/images/${t}`;const n=await fetch(e);try{const t=await n.json();return console.log(t),t}catch(t){console.log("error",t)}};Client=e})();